<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Select Students to Print ID Cards</title>
    <script defer src="/js/selectStudents.js"></script> <!-- Frontend logic -->
    <style>
        .disabled { pointer-events: none; opacity: 0.6; } 
    </style>
</head>
<body>
    <h1>Select Students (Max 9)</h1>

    <form id="selectForm" method="POST" action="/admin/print-id">
        <% students.forEach((student, i) => { %>
            <div>
                <input type="checkbox" name="selectedStudents" value="<%= student._id %>" class="student-checkbox">
                <label><%= student.name %> (Roll No: <%= student.rollNo %>)</label>
            </div>
        <% }) %>

        <button type="submit" id="printButton" class="disabled" disabled>Print ID Cards</button>
    </form>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
    const checkboxes = document.querySelectorAll('.student-checkbox');
    const printButton = document.getElementById('printButton');
    const maxSelection = 9;

    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', () => {
            const selected = document.querySelectorAll('.student-checkbox:checked').length;

            if (selected > 0 && selected <= maxSelection) {
                printButton.disabled = false;
                printButton.classList.remove('disabled');
            } else {
                printButton.disabled = true;
                printButton.classList.add('disabled');
            }

            if (selected >= maxSelection) {
                checkboxes.forEach(box => {
                    if (!box.checked) box.disabled = true;
                });
            } else {
                checkboxes.forEach(box => box.disabled = false);
            }
        });
    });
});

    </script>
</body>
</html>
